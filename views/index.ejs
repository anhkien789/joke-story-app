<%- include("partials/header.ejs") %>

<h2 class="text-center">
  If you are bored, you can search a joke story below.
</h2>
<p class="text-center">
  We have
  <span class="text_impressed"><%= info.jokes.totalCount %></span>
  stories. I hope it will improve your mood.
</p>
<form class="d-flex shadow p-4 rounded gap-3 mt-4" action="/" method="POST">
  <div class="form-floating text-capitalize">
    <select
      class="form-select"
      id="floatingSelect"
      aria-label="Floating label select example"
      name="categories"
    >
      <option selected value="Any">Any</option>
      <option value="Misc">Misc</option>
      <option value="Programming">Programming</option>
      <option value="Dark">Dark</option>
      <option value="Pun">Pun</option>
      <option value="Spooky">Spooky</option>
      <option value="Christmas">Christmas</option>
    </select>
    <label for="floatingSelect">Categories</label>
  </div>
  <div class="form-floating text-capitalize">
    <select
      class="form-select"
      id="floatingSelect"
      aria-label="Floating label select example"
      name="blacklistFlags"
    >
      <option selected value="">Any</option>
      <option value="nsfw">NSFW</option>
      <option value="religious">Religious</option>
      <option value="political">Political</option>
      <option value="racist">Racist</option>
      <option value="sexist">Sexist</option>
      <option value="explicit">Explicit</option>
    </select>
    <label for="floatingSelect">Flags</label>
  </div>
  <div class="form-floating text-capitalize">
    <select
      class="form-select"
      id="floatingSelect"
      aria-label="Floating label select example"
      name="type"
    >
      <option selected value="">Any</option>
      <option value="single">Single</option>
      <option value="twopart">Two Part</option>
    </select>
    <label for="floatingSelect">Type</label>
  </div>
  <div class="form-floating text-capitalize">
    <select
      class="form-select"
      id="floatingSelect"
      aria-label="Floating label select example"
      name="lang"
    >
      <option selected value="">Any</option>
      <option value="cs">Czech</option>
      <option value="de">German</option>
      <option value="en">English</option>
      <option value="es">Spanish</option>
      <option value="fr">French</option>
      <option value="pt">Portuguese</option>
    </select>
    <label for="floatingSelect">Language</label>
  </div>
  <button type="submit" class="btn btn-primary">Search</button>
</form>
<div class="shadow rounded p-4 mt-4">
  <% if (locals.story) { %> <% if (story.type === "single") { %>
  <p><%= story.joke %></p>
  <% } else { %>
  <p><span class="text_impressed">Person 1:</span> <%= story.setup %></p>
  <p><span class="text_impressed">Person 2:</span> <%= story.delivery %></p>
  <%} %> <% } else { %>

  <p>There is 0 story. Please search for stories!</p>

  <% } %>
</div>

<%- include("partials/footer.ejs") %>
